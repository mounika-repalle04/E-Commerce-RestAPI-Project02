<!DOCTYPE html>
<html>
<head>
    <title>E-Commerce Demo</title>
    <style>
        body { font-family: Arial; background:#f4f6f8; }
        .card { width:400px; margin:50px auto; background:#fff;
                padding:20px; border-radius:8px; }
        input, button { width:100%; padding:8px; margin:6px 0; }
        button { background:#0d6efd; color:#fff; border:none; }
        pre { background:#eee; padding:10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>Add Item</h2>

    <input id="name" placeholder="Item Name" type="text">
<input id="desc" placeholder="Description" type="text">
<input id="price" placeholder="Price" type="number" step="0.01" min="0.01">

    <button onclick="addItem()">Add Item</button>

    <h3>Response</h3>
    <pre id="result"></pre>
</div>

<script>
function addItem() {

    const name = document.getElementById("name").value.trim();
    const desc = document.getElementById("desc").value.trim();
    const priceValue = document.getElementById("price").value;
    const price = parseFloat(priceValue);

    if (name === "" || desc === "" || priceValue === "" || isNaN(price) || price <= 0) {
        document.getElementById("result").innerText =
            "Please enter valid item details ";
        return;
    }

    fetch("/api/items", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            name: name,
            description: desc,
            price: price
        })
    })
    .then(async response => {
        const text = await response.text();
        try {
            const data = JSON.parse(text);
            document.getElementById("result").innerText =
                JSON.stringify(data, null, 2);
        } catch {
            document.getElementById("result").innerText = text;
        }
    })
    .catch(error => {
        document.getElementById("result").innerText =
            "Error: " + error;
    });
}
</script>

</body>
</html>
